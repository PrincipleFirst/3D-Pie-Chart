<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Pie Chart å±•ç¤ºé¡µé¢</title>

  <!-- å¼•å…¥åº“æ–‡ä»¶ -->
  <link rel="stylesheet" href="../dist-react-lib/3dpie-react.css">
  <script src="../dist-react-lib/3dpie-react.umd.js"></script>

  <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      body {
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          min-height: 100vh;
          padding: 20px;
      }

      .header {
          text-align: center;
          color: white;
          margin-bottom: 40px;
      }

      .header h1 {
          font-size: 3rem;
          margin-bottom: 10px;
          text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      .header p {
          font-size: 1.2rem;
          opacity: 0.9;
      }

      .showcase-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
          gap: 30px;
          max-width: 1400px;
          margin: 0 auto;
      }

      .chart-card {
          background: white;
          border-radius: 15px;
          padding: 25px;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
          transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .chart-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      }

      .chart-title {
          font-size: 1.5rem;
          font-weight: bold;
          color: #333;
          margin-bottom: 15px;
          text-align: center;
      }

      .chart-description {
          color: #666;
          margin-bottom: 20px;
          text-align: center;
          line-height: 1.5;
      }

      .chart-container {
          width: 100%;
          height: 400px;
          border-radius: 10px;
          overflow: hidden;
          border: 2px solid #f0f0f0;
      }

      .controls {
          margin-top: 20px;
          display: flex;
          gap: 10px;
          justify-content: center;
          flex-wrap: wrap;
      }

      .btn {
          background: linear-gradient(45deg, #667eea, #764ba2);
          color: white;
          border: none;
          padding: 10px 20px;
          border-radius: 25px;
          cursor: pointer;
          font-size: 14px;
          transition: all 0.3s ease;
          box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      }

      .btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
      }

      .btn.secondary {
          background: linear-gradient(45deg, #f093fb, #f5576c);
      }

      .btn.secondary:hover {
          box-shadow: 0 6px 20px rgba(240, 147, 251, 0.4);
      }

      .btn.success {
          background: linear-gradient(45deg, #4facfe, #00f2fe);
      }

      .btn.success:hover {
          box-shadow: 0 6px 20px rgba(79, 172, 254, 0.4);
      }

      .status-bar {
          background: #f8f9fa;
          padding: 15px;
          border-radius: 10px;
          margin-top: 20px;
          border-left: 4px solid #667eea;
      }

      .status-text {
          color: #333;
          font-weight: 500;
      }

      .footer {
          text-align: center;
          margin-top: 50px;
          color: white;
          opacity: 0.8;
      }

      @media (max-width: 768px) {
          .showcase-grid {
              grid-template-columns: 1fr;
              gap: 20px;
          }

          .header h1 {
              font-size: 2rem;
          }

          .chart-container {
              height: 300px;
          }
      }

      /* å¯Œæ–‡æœ¬æ ‡ç­¾åŠ¨ç”» */
      @keyframes glow {
          from {
              text-shadow: 0 0 10px currentColor;
          }
          to {
              text-shadow: 0 0 20px currentColor, 0 0 30px currentColor;
          }
      }

      /* è„‰å†²åŠ¨ç”» */
      @keyframes pulse {
          0% {
              transform: scale(1);
          }
          50% {
              transform: scale(1.05);
          }
          100% {
              transform: scale(1);
          }
      }

      /* æ ‡ç­¾çº¿æ ·å¼ */
      .three-d-pie-label-line {
          stroke-width: 2;
          stroke-linecap: round;
      }
  </style>
</head>
<body>
<div class="header">
  <h1>ğŸ¯ 3D Pie Chart å±•ç¤º</h1>
  <p>åŸºäº React çš„ 3D é¥¼å›¾åº“ï¼Œæ”¯æŒå¯Œæ–‡æœ¬æ ‡ç­¾ã€äº¤äº’æ§åˆ¶ã€ä¸»é¢˜åˆ‡æ¢ç­‰åŠŸèƒ½<br>
  <strong>ğŸ¯ innerRadius é…ç½®æ¼”ç¤ºï¼š</strong> å±•ç¤ºä¸åŒå†…å¾„å€¼çš„ç¯å½¢å›¾æ•ˆæœ</p>
</div>

<div class="showcase-grid">
  <!-- ç®€å•é”€å”®æ•°æ® -->
  <div class="chart-card">
    <div class="chart-title">ğŸ“Š å°ç¯å½¢å›¾ (innerRadius: 2)</div>
    <div class="chart-description">ç»†ç¯å½¢å›¾ï¼Œä¿æŒé¥¼å›¾è§†è§‰ç‰¹å¾ï¼Œå¢åŠ ç°ä»£æ„Ÿ</div>
    <div class="chart-container" id="chart1"></div>
          <div class="controls">
        <button class="btn" onclick="updateChart1()">æ›´æ–°æ•°æ®</button>
        <button class="btn secondary" onclick="toggleTheme1()">åˆ‡æ¢ä¸»é¢˜</button>
        <button class="btn success" onclick="adjustInnerRadius('chart1', 5)">å¢å¤§å†…å¾„</button>
        <button class="btn success" onclick="adjustInnerRadius('chart1', 2)">æ¢å¤é»˜è®¤</button>
        <button class="btn secondary" onclick="resetCamera('chart1')">é‡ç½®ç›¸æœº</button>
        <button class="btn secondary" onclick="toggleAutoRotate('chart1')">åˆ‡æ¢æ—‹è½¬</button>
      </div>
    <div class="status-bar">
      <div class="status-text">çŠ¶æ€ï¼šâœ… å›¾è¡¨å·²åŠ è½½</div>
    </div>
  </div>

  <!-- äº§å“åˆ†ç±» -->
  <div class="chart-card">
    <div class="chart-title">ğŸ·ï¸ ä¸­ç­‰ç¯å½¢å›¾ (innerRadius: 15)</div>
    <div class="chart-description">ä¸­ç­‰å®½åº¦ç¯å½¢å›¾ï¼Œå¹³è¡¡è§†è§‰æ•ˆæœå’Œå¯è¯»æ€§</div>
    <div class="chart-container" id="chart2"></div>
          <div class="controls">
        <button class="btn" onclick="updateChart2()">éšæœºæ•°æ®</button>
        <button class="btn success" onclick="animateChart2()">åŠ¨ç”»æ•ˆæœ</button>
        <button class="btn secondary" onclick="adjustInnerRadius('chart2', 25)">å¢å¤§å†…å¾„</button>
        <button class="btn secondary" onclick="adjustInnerRadius('chart2', 15)">æ¢å¤é»˜è®¤</button>
        <button class="btn secondary" onclick="resetCamera('chart2')">é‡ç½®ç›¸æœº</button>
        <button class="btn secondary" onclick="toggleAutoRotate('chart2')">åˆ‡æ¢æ—‹è½¬</button>
      </div>
    <div class="status-bar">
      <div class="status-text">çŠ¶æ€ï¼šâœ… å›¾è¡¨å·²åŠ è½½</div>
    </div>
  </div>

  <!-- å¤æ‚å¯Œæ–‡æœ¬æ ‡ç­¾ -->
  <div class="chart-card">
    <div class="chart-title">âœ¨ å®½ç¯å½¢å›¾</div>
    <div class="chart-description">å®½ç¯å½¢å›¾ï¼Œçªå‡ºç¯å½¢ç»“æ„ï¼Œé€‚åˆè£…é¥°æ€§å±•ç¤º</div>
    <div class="chart-container" id="chart3"></div>
          <div class="controls">
        <button class="btn" onclick="updateChart3()">åˆ‡æ¢æ ‡ç­¾</button>
        <button class="btn secondary" onclick="toggleEffects3()">ç‰¹æ•ˆå¼€å…³</button>
        <button class="btn success" onclick="adjustInnerRadius('chart3', 45)">å¢å¤§å†…å¾„</button>
        <button class="btn success" onclick="adjustInnerRadius('chart3', 35)">æ¢å¤é»˜è®¤</button>
        <button class="btn secondary" onclick="resetCamera('chart3')">é‡ç½®ç›¸æœº</button>
        <button class="btn secondary" onclick="toggleAutoRotate('chart3')">åˆ‡æ¢æ—‹è½¬</button>
      </div>
    <div class="status-bar">
      <div class="status-text">çŠ¶æ€ï¼šâœ… å›¾è¡¨å·²åŠ è½½</div>
    </div>
  </div>

  <!-- åŠ¨æ€æ•°æ® -->
  <div class="chart-card">
    <div class="chart-title">ğŸ”„ å®å¿ƒé¥¼å›¾ (innerRadius: 0)</div>
    <div class="chart-description">ä¼ ç»Ÿå®å¿ƒé¥¼å›¾ï¼Œæ— å†…å¾„ï¼Œé€‚åˆå±•ç¤ºæ•´ä½“æ•°æ®åˆ†å¸ƒ</div>
    <div class="chart-container" id="chart4"></div>
          <div class="controls">
        <button class="btn" onclick="startAutoUpdate()">å¼€å§‹è‡ªåŠ¨æ›´æ–°</button>
        <button class="btn secondary" onclick="stopAutoUpdate()">åœæ­¢æ›´æ–°</button>
        <button class="btn success" onclick="adjustInnerRadius('chart4', 10)">æ·»åŠ å†…å¾„</button>
        <button class="btn success" onclick="adjustInnerRadius('chart4', 0)">æ¢å¤å®å¿ƒ</button>
        <button class="btn secondary" onclick="resetCamera('chart4')">é‡ç½®ç›¸æœº</button>
        <button class="btn secondary" onclick="toggleAutoRotate('chart4')">åˆ‡æ¢æ—‹è½¬</button>
      </div>
    <div class="status-bar">
      <div class="status-text">çŠ¶æ€ï¼šâœ… å›¾è¡¨å·²åŠ è½½</div>
    </div>
  </div>
</div>

<div class="footer">
  <p>åŸºäº React + Three.js æ„å»º | æ”¯æŒå¯Œæ–‡æœ¬æ ‡ç­¾ã€3Dæ•ˆæœã€äº¤äº’æ§åˆ¶</p>
</div>

<script>
  let charts = {}
  let autoUpdateInterval = null

  // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–æ‰€æœ‰å›¾è¡¨
  document.addEventListener('DOMContentLoaded', function() {
    setTimeout(() => {
      initAllCharts()
    }, 200)
  })

  // åˆå§‹åŒ–æ‰€æœ‰å›¾è¡¨
  function initAllCharts() {
    try {
      // å›¾è¡¨1ï¼šç®€å•é”€å”®æ•°æ®
      charts.chart1 = init3DPieChart('chart1', {
        data: [
          { value: 2.5, color: '#ff6b6b', label: 'ğŸ”¥ çƒ­é”€äº§å“', height: 0.8, offset: 0 },
          { value: 1.8, color: '#45b7d1', label: 'ğŸš€ æ——èˆ°äº§å“', height: 0.7, offset: 0 },
          { value: 1.2, color: '#ffd700', label: 'â­ æ˜æ˜Ÿäº§å“', height: 0.6, offset: 0 },
          { value: 0.8, color: '#ff9ff3', label: 'ğŸ’ ç²¾å“äº§å“', height: 0.5, offset: 0 },
        ],
        layout: {
          title: 'é”€å”®æ•°æ®åˆ†å¸ƒ',
          innerRadius: 2,        // å°ç¯å½¢å›¾
          outerRadius: 100,
        },
        style: {
          backgroundColor: '#1f2937',
        },
        camera: {
          position: [3, 2, 6],
          fov: 45,
          minPolarAngle: 0.3,
          maxPolarAngle: Math.PI - 0.3,
          minDistance: 3,
          maxDistance: 15,
          enableDamping: true,
          dampingFactor: 0.1,
        },
      })

      // å›¾è¡¨2ï¼šäº§å“åˆ†ç±»
      charts.chart2 = init3DPieChart('chart2', {
        data: [
          { value: 3.0, color: '#4facfe', label: 'ğŸ“± ç§»åŠ¨è®¾å¤‡', height: 0.9, offset: 0 },
          { value: 2.2, color: '#43e97b', label: 'ğŸ’» ç”µè„‘è®¾å¤‡', height: 0.8, offset: 0 },
          { value: 1.5, color: '#fa709a', label: 'ğŸ® æ¸¸æˆè®¾å¤‡', height: 0.7, offset: 0 },
          { value: 1.0, color: '#fee140', label: 'ğŸ“º å½±éŸ³è®¾å¤‡', height: 0.6, offset: 0 },
          { value: 0.6, color: '#a8edea', label: 'ğŸ  æ™ºèƒ½å®¶å±…', height: 0.5, offset: 0 },
        ],
        layout: {
          title: 'äº§å“åˆ†ç±»ç»Ÿè®¡',
          innerRadius: 15,       // ä¸­ç­‰ç¯å½¢å›¾
          outerRadius: 110,
        },
        style: {
          backgroundColor: '#2d3748',
        },
        camera: {
          position: [3, 2, 6],
          fov: 45,
          minPolarAngle: 0.3,
          maxPolarAngle: Math.PI - 0.3,
          minDistance: 3,
          maxDistance: 15,
          enableDamping: true,
          dampingFactor: 0.1,
        },
      })

      // å›¾è¡¨3ï¼šå¤æ‚å¯Œæ–‡æœ¬æ ‡ç­¾ï¼ˆå±•ç¤ºçµæ´»çš„æ ·å¼é…ç½®ï¼‰
      charts.chart3 = init3DPieChart('chart3', {
        data: [
          {
            value: 1.5,
            color: '#ff6b6b',
            label: '<div style=\'text-align: center; transform: rotate(-2deg);\'><div style=\'color: #ff6b6b; font-size: 1.2em; font-weight: bold; text-shadow: 0 0 10px #ff6b6b; animation: glow 2s ease-in-out infinite alternate; margin-bottom: 12px;\'>ğŸ”¥ äº§å“A çƒ­é”€ç‰ˆ ğŸ”¥</div><div style=\'color: #4ecdc4; font-size: 0.9em; margin: 2px 0; margin-bottom: 22px;\'><span style=\'background: linear-gradient(45deg, #4ecdc4, #44a08d); -webkit-background-clip: text; -webkit-text-fill-color: transparent;\'>âœ¨ å…¨æ–°å‡çº§ âœ¨</span></div><div style=\'color: #feca57; font-size: 0.8em; font-style: italic;\'><span style=\'border: 1px solid #feca57; padding: 1px 4px; border-radius: 3px; background: rgba(254, 202, 87, 0.1);\'>é™æ—¶ç‰¹ä»· 8.8æŠ˜</span></div></div>',
            explode: false,
            height: 0.5,
            offset: 0,
            labelLineColor: '#ff0000',
            labelLineWidth: 1,
            labelLineStyle: {
              labelOffset: 30,
            },
            labelClassName: 'custom-label-style',
            labelContainerStyle: {
              background: 'rgba(0, 0, 0, 0.8)',
              padding: '12px',
              borderRadius: '8px',
              border: '2px solid rgba(255, 107, 107, 0.6)',
              minWidth: '250px',
              boxShadow: '0 4px 20px rgba(255, 107, 107, 0.3)',
              backdropFilter: 'blur(10px)',
              transition: 'all 0.3s ease',
            },
          },
          {
            value: 0.85,
            color: '#45b7d1',
            label: '<div style=\'text-align: center;\'><div style=\'color: #45b7d1; font-size: 1.1em; font-weight: bold; margin-bottom: 12px; animation: pulse 2s infinite;\'><span style=\'background: linear-gradient(90deg, #45b7d1, #96ceb4); -webkit-background-clip: text; -webkit-text-fill-color: transparent;\'>ğŸš€ äº§å“B æ——èˆ°ç‰ˆ</span></div><div style=\'color: #96ceb4; font-size: 0.9em; margin: 2px 0; margin-bottom: 22px;\'><span style=\'border-left: 3px solid #96ceb4; padding-left: 8px; background: rgba(150, 206, 180, 0.1);\'>ğŸ’ é’»çŸ³å“è´¨ä¿è¯</span></div><div style=\'color: #feca57; font-size: 0.8em;\'><span style=\'background: linear-gradient(45deg, #feca57, #ff9ff3); padding: 2px 6px; border-radius: 4px; color: white; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);\'>VIP ä¸“å±æœåŠ¡</span></div></div>',
            explode: false,
            height: 0.5,
            offset: 0,
            labelLineColor: '#0000ff',
            labelLineWidth: 1,
            labelLineStyle: {
              labelOffset: 30,
            },
            labelClassName: 'premium-label-style',
            labelContainerStyle: {
              background: 'linear-gradient(135deg, rgba(69, 183, 209, 0.1), rgba(150, 206, 180, 0.1))',
              padding: '10px',
              borderRadius: '6px',
              border: '1px solid rgba(69, 183, 209, 0.4)',
              minWidth: '220px',
              backdropFilter: 'blur(10px)',
              filter: 'hue-rotate(45deg)',
              cursor: 'pointer',
            },
          },
          {
            value: 0.6,
            color: '#ffd700',
            label: '<div style=\'text-align: center;\'><div style=\'color: #ffd700; font-size: 1.1em; font-weight: bold; text-shadow: 0 0 8px #ffd700; margin-bottom: 12px;\'><span style=\'background: radial-gradient(circle, #ffd700, #ffed4e); padding: 2px 8px; border-radius: 5px; color: #333;\'>â­ äº§å“C è‡³å°Šç‰ˆ â­</span></div><div style=\'color: #ff9ff3; font-size: 0.9em; margin: 2px 0; margin-bottom: 22px;\'><span style=\'border: 2px dashed #ff9ff3; padding: 1px 6px; border-radius: 3px; background: rgba(255, 159, 243, 0.1);\'>ğŸ¯ ç²¾å‡†å®šä½ æ™ºèƒ½æ¨è</span></div><div style=\'color: #54a0ff; font-size: 0.8em; font-style: italic;\'><span style=\'background: linear-gradient(135deg, #54a0ff, #5f27cd); color: white; padding: 1px 5px; border-radius: 3px; box-shadow: 0 2px 4px rgba(0,0,0,0.3);\'>AI é©±åŠ¨ æœªæ¥ç§‘æŠ€</span></div></div>',
            explode: false,
            height: 0.5,
            offset: 0,
            labelLineColor: '#00ff00',
            labelLineWidth: 1,
            labelLineStyle: {
              labelOffset: 30,
            },
            labelClassName: 'luxury-label-style',
            labelContainerStyle: {
              background: 'radial-gradient(circle, rgba(255, 215, 0, 0.15), rgba(255, 237, 78, 0.1))',
              padding: '15px',
              borderRadius: '12px',
              border: '2px dashed rgba(255, 215, 0, 0.6)',
              minWidth: '280px',
              boxShadow: '0 6px 25px rgba(255, 215, 0, 0.2)',
              textShadow: '2px 2px 4px rgba(0,0,0,0.5)',
              letterSpacing: '1px',
              wordSpacing: '2px',
              lineHeight: '1.6',
            },
          },
          {
            value: 0.4,
            color: '#ff9ff3',
            label: '<div style=\'text-align: center;\'><div style=\'color: #ff9ff3; font-size: 1.1em; font-weight: bold; margin-bottom: 12px;\'><span style=\'background: linear-gradient(45deg, #ff9ff3, #f368e0); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 0 15px #ff9ff3;\'>ğŸ­ äº§å“D è‰ºæœ¯ç‰ˆ</span></div><div style=\'color: #54a0ff; font-size: 0.9em; margin: 2px 0;  margin-bottom: 22px;\'><span style=\'border: 2px solid #54a0ff; border-radius: 15px; padding: 2px 8px; background: linear-gradient(135deg, rgba(84, 160, 255, 0.2), rgba(95, 39, 205, 0.2));\'>ğŸ¨ åˆ›æ„æ— é™ è‰ºæœ¯æ— ç•Œ</span></div><div style=\'color: #ff6b6b; font-size: 0.8em; font-style: italic;\'><span style=\'background: radial-gradient(circle, #ff6b6b, #ee5a24); color: white; padding: 1px 6px; border-radius: 4px; box-shadow: 0 2px 8px rgba(255, 107, 107, 0.4);\'>ğŸ”¥ é™æ—¶æŠ¢è´­ åº“å­˜ç´§å¼ </span></div></div>',
            explode: false,
            height: 0.5,
            offset: 0,
          },
          {
            value: 0.3,
            color: '#00d2d3',
            label: '<div style=\'text-align: center;\'><div style=\'color: #00d2d3; font-size: 1.1em; font-weight: bold; margin-bottom: 12px;\'><span style=\'background: linear-gradient(90deg, #00d2d3, #54a0ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 0 12px #00d2d3;\'>ğŸŒŸ äº§å“E æ¢ç´¢ç‰ˆ</span></div><div style=\'color: #5f27cd; font-size: 0.9em; margin: 2px 0; margin-bottom: 22px;\'><span style=\'border-left: 4px solid #5f27cd; padding-left: 10px; background: linear-gradient(90deg, rgba(95, 39, 205, 0.1), rgba(84, 160, 255, 0.1));\'>ğŸ”® ç¥ç§˜åŠŸèƒ½ å³å°†æ­æ™“</span></div><div style=\'color: #ff9ff3; font-size: 0.8em;\'><span style=\'background: linear-gradient(135deg, #ff9ff3, #f368e0); color: white; padding: 2px 8px; border-radius: 6px; box-shadow: 0 3px 10px rgba(255, 159, 243, 0.4); text-shadow: 1px 1px 2px rgba(0,0,0,0.3);\'>ğŸš€ æ•¬è¯·æœŸå¾… æƒŠå–œä¸æ–­</span></div></div>',
            explode: false,
            height: 0.5,
            offset: 0,
          },
        ],
        layout: {
          title: 'å¯Œæ–‡æœ¬æ ‡ç­¾å±•ç¤º',
          innerRadius: 100,       // å®½ç¯å½¢å›¾
          outerRadius: 160,
        },
        style: {
          backgroundColor: '#1a202c',
        },
        camera: {
          position: [4, 4, 4],
          fov: 45,
          minPolarAngle: 0.28,
          maxPolarAngle: Math.PI - 0.28,
          minDistance: 3,
          maxDistance: 15,
          enableDamping: true,
          dampingFactor: 0.1,
        },
      })

      // å›¾è¡¨4ï¼šåŠ¨æ€æ•°æ®
      charts.chart4 = init3DPieChart('chart4', {
        data: [
          { value: 1.0, color: '#ff6b6b', label: 'å®æ—¶æ•°æ®A', height: 0.6, offset: 0 },
          { value: 0.8, color: '#45b7d1', label: 'å®æ—¶æ•°æ®B', height: 0.5, offset: 0 },
          { value: 0.6, color: '#ffd700', label: 'å®æ—¶æ•°æ®C', height: 0.4, offset: 0 },
        ],
        layout: {
          title: 'åŠ¨æ€æ•°æ®æ›´æ–°',
          innerRadius: 0,        // å®å¿ƒé¥¼å›¾
          outerRadius: 90,
        },
        style: {
          backgroundColor: '#2d3748',
        },
        camera: {
          position: [3, 2, 6],
          fov: 45,
          minPolarAngle: 0.3,
          maxPolarAngle: Math.PI - 0.3,
          minDistance: 3,
          maxDistance: 15,
          enableDamping: true,
          dampingFactor: 0.1,
        },
      })

      // æ·»åŠ äº‹ä»¶ç›‘å¬
      Object.keys(charts).forEach(chartId => {
        const chart = charts[chartId]
        const container = document.getElementById(chartId)

        container.addEventListener('sliceClick', (event) => {
          console.log(`${chartId} æ‰‡åŒºç‚¹å‡»:`, event.detail)
        })

        container.addEventListener('chartReady', (event) => {
          console.log(`${chartId} å›¾è¡¨å°±ç»ª:`, event.detail)
          
          // å°†ç›¸æœºæ§åˆ¶æ–¹æ³•ä¿å­˜åˆ°å›¾è¡¨å¯¹è±¡ä¸­
          if (event.detail && event.detail.cameraControls) {
            charts[chartId].cameraControls = event.detail.cameraControls;
            console.log(`${chartId} ç›¸æœºæ§åˆ¶å·²å¯ç”¨`);
          }
        })
      })

      console.log('æ‰€æœ‰å›¾è¡¨åˆå§‹åŒ–å®Œæˆï¼')

    } catch (error) {
      console.error('å›¾è¡¨åˆå§‹åŒ–å¤±è´¥:', error)
    }
  }

  // å›¾è¡¨1ï¼šæ›´æ–°æ•°æ®
  function updateChart1() {
    if (!charts.chart1) return

    const newData = [
      { value: Math.random() * 3 + 1, color: '#ff6b6b', label: 'ğŸ”¥ çƒ­é”€äº§å“', height: 0.8, offset: 0 },
      { value: Math.random() * 2 + 1, color: '#45b7d1', label: 'ğŸš€ æ——èˆ°äº§å“', height: 0.7, offset: 0 },
      { value: Math.random() * 1.5 + 0.5, color: '#ffd700', label: 'â­ æ˜æ˜Ÿäº§å“', height: 0.6, offset: 0 },
      { value: Math.random() * 1 + 0.3, color: '#ff9ff3', label: 'ğŸ’ ç²¾å“äº§å“', height: 0.5, offset: 0 },
    ]

    charts.chart1.setData(newData)
    updateStatus('chart1', 'âœ… æ•°æ®å·²æ›´æ–°')
  }

  // å›¾è¡¨1ï¼šåˆ‡æ¢ä¸»é¢˜
  function toggleTheme1() {
    if (!charts.chart1) return

    const container = document.getElementById('chart1')
    const isLight = container.style.backgroundColor === 'rgb(255, 255, 255)'

    charts.chart1.setOption({
      style: {
        backgroundColor: isLight ? '#1f2937' : '#ffffff',
      },
    })

    updateStatus('chart1', isLight ? 'âœ… å·²åˆ‡æ¢åˆ°æ·±è‰²ä¸»é¢˜' : 'âœ… å·²åˆ‡æ¢åˆ°æµ…è‰²ä¸»é¢˜')
  }

  // å›¾è¡¨2ï¼šéšæœºæ•°æ®
  function updateChart2() {
    if (!charts.chart2) return

    const newData = [
      { value: Math.random() * 4 + 1, color: '#4facfe', label: 'ğŸ“± ç§»åŠ¨è®¾å¤‡', height: 0.9, offset: 0 },
      { value: Math.random() * 3 + 1, color: '#43e97b', label: 'ğŸ’» ç”µè„‘è®¾å¤‡', height: 0.8, offset: 0 },
      { value: Math.random() * 2 + 0.5, color: '#fa709a', label: 'ğŸ® æ¸¸æˆè®¾å¤‡', height: 0.7, offset: 0 },
      { value: Math.random() * 1.5 + 0.3, color: '#fee140', label: 'ğŸ“º å½±éŸ³è®¾å¤‡', height: 0.6, offset: 0 },
      { value: Math.random() * 1 + 0.2, color: '#a8edea', label: 'ğŸ  æ™ºèƒ½å®¶å±…', height: 0.5, offset: 0 },
    ]

    charts.chart2.setData(newData)
    updateStatus('chart2', 'âœ… éšæœºæ•°æ®å·²ç”Ÿæˆ')
  }

  // å›¾è¡¨2ï¼šåŠ¨ç”»æ•ˆæœ
  function animateChart2() {
    if (!charts.chart2) return

    charts.chart2.setOption({
      interaction: { spinSpeed: 2.0 },
    })

    setTimeout(() => {
      charts.chart2.setOption({
        interaction: { spinSpeed: 0.0 },
      })
    }, 3000)

    updateStatus('chart2', 'ğŸ­ åŠ¨ç”»æ•ˆæœå·²å¯åŠ¨')
  }

  // å›¾è¡¨3ï¼šæ›´æ–°æ ‡ç­¾
  function updateChart3() {
    if (!charts.chart3) return

    const labels = [
      '<div style=\'text-align: center;\'><div style=\'color: #ff6b6b; font-size: 1.2em; font-weight: bold; text-shadow: 0 0 15px #ff6b6b; animation: glow 1.5s ease-in-out infinite alternate; margin-bottom: 12px;\'>ğŸ”¥ çƒ­é”€ç‰ˆ ğŸ”¥</div><div style=\'color: #4ecdc4; font-size: 0.9em; margin: 2px 0; margin-bottom: 22px;\'><span style=\'background: linear-gradient(45deg, #4ecdc4, #44a08d); -webkit-background-clip: text; -webkit-text-fill-color: transparent;\'>âœ¨ å…¨æ–°å‡çº§ âœ¨</span></div><div style=\'color: #feca57; font-size: 0.8em; font-style: italic;\'><span style=\'border: 1px solid #feca57; padding: 1px 4px; border-radius: 3px; background: rgba(254, 202, 87, 0.1);\'>é™æ—¶ç‰¹ä»· 8.8æŠ˜</span></div></div>',
      '<div style=\'text-align: center;\'><div style=\'color: #45b7d1; font-size: 1.2em; font-weight: bold; text-shadow: 0 0 12px #45b7d1; margin-bottom: 12px;\'><span style=\'background: linear-gradient(90deg, #45b7d1, #96ceb4); -webkit-background-clip: text; -webkit-text-fill-color: transparent;\'>ğŸš€ æ——èˆ°ç‰ˆ</span></div><div style=\'color: #96ceb4; font-size: 0.9em; margin: 2px 0; margin-bottom: 22px;\'><span style=\'border-left: 3px solid #96ceb4; padding-left: 8px; background: rgba(150, 206, 180, 0.1);\'>ğŸ’ é’»çŸ³å“è´¨ä¿è¯</span></div><div style=\'color: #feca57; font-size: 0.8em;\'><span style=\'background: linear-gradient(45deg, #feca57, #ff9ff3); padding: 2px 6px; border-radius: 4px; color: white; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);\'>VIP ä¸“å±æœåŠ¡</span></div></div>',
      '<div style=\'text-align: center;\'><div style=\'color: #ffd700; font-size: 1.2em; font-weight: bold; text-shadow: 0 0 10px #ffd700; margin-bottom: 12px;\'><span style=\'background: radial-gradient(circle, #ffd700, #ffed4e); padding: 2px 8px; border-radius: 5px; color: #333;\'>â­ è‡³å°Šç‰ˆ â­</span></div><div style=\'color: #ff9ff3; font-size: 0.9em; margin: 2px 0; margin-bottom: 22px;\'><span style=\'border: 2px dashed #ff9ff3; padding: 1px 6px; border-radius: 3px; background: rgba(255, 159, 243, 0.1);\'>ğŸ¯ ç²¾å‡†å®šä½ æ™ºèƒ½æ¨è</span></div><div style=\'color: #54a0ff; font-size: 0.8em; font-style: italic;\'><span style=\'background: linear-gradient(135deg, #54a0ff, #5f27cd); color: white; padding: 1px 5px; border-radius: 3px; box-shadow: 0 2px 4px rgba(0,0,0,0.3);\'>AI é©±åŠ¨ æœªæ¥ç§‘æŠ€</span></div></div>',
      '<div style=\'text-align: center;\'><div style=\'color: #ff9ff3; font-size: 1.1em; font-weight: bold; text-shadow: 0 0 12px #ff9ff3; margin-bottom: 12px;\'><span style=\'background: linear-gradient(45deg, #ff9ff3, #f368e0); -webkit-background-clip: text; -webkit-text-fill-color: transparent;\'>ğŸ­ è‰ºæœ¯ç‰ˆ</span></div><div style=\'color: #54a0ff; font-size: 0.9em; margin: 2px 0; margin-bottom: 22px;\'><span style=\'border-left: 3px solid #54a0ff; border-radius: 15px; padding: 2px 8px; background: linear-gradient(135deg, rgba(84, 160, 255, 0.2), rgba(95, 39, 205, 0.2));\'>ğŸ¨ åˆ›æ„æ— é™ è‰ºæœ¯æ— ç•Œ</span></div><div style=\'color: #ff6b6b; font-size: 0.8em; font-style: italic;\'><span style=\'background: radial-gradient(circle, #ff6b6b, #ee5a24); color: white; padding: 1px 6px; border-radius: 4px; box-shadow: 0 2px 8px rgba(255, 107, 107, 0.4);\'>ğŸ”¥ é™æ—¶æŠ¢è´­ åº“å­˜ç´§å¼ </span></div></div>',
      '<div style=\'text-align: center;\'><div style=\'color: #00d2d3; font-size: 1.1em; font-weight: bold; text-shadow: 0 0 10px #00d2d3; margin-bottom: 12px;\'><span style=\'background: linear-gradient(90deg, #00d2d3, #54a0ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent;\'>ğŸŒŸ æ¢ç´¢ç‰ˆ</span></div><div style=\'color: #5f27cd; font-size: 0.9em; margin: 2px 0; margin-bottom: 22px;\'><span style=\'border-left: 4px solid #5f27cd; padding-left: 10px; background: linear-gradient(135deg, rgba(95, 39, 205, 0.1), rgba(84, 160, 255, 0.1));\'>ğŸ”® ç¥ç§˜åŠŸèƒ½ å³å°†æ­æ™“</span></div><div style=\'color: #ff9ff3; font-size: 0.8em;\'><span style=\'background: linear-gradient(135deg, #ff9ff3, #f368e0); color: white; padding: 2px 8px; border-radius: 6px; box-shadow: 0 3px 10px rgba(255, 159, 243, 0.4); text-shadow: 1px 1px 2px rgba(0,0,0,0.3);\'>ğŸš€ æ•¬è¯·æœŸå¾… æƒŠå–œä¸æ–­</span></div></div>',
    ]

    const newData = charts.chart3.options.data.map((item, index) => ({
      ...item,
      label: labels[index],
    }))

    charts.chart3.setData(newData)
    updateStatus('chart3', 'âœ… æ ‡ç­¾æ ·å¼å·²æ›´æ–°')
  }

  // å›¾è¡¨3ï¼šç‰¹æ•ˆå¼€å…³
  function toggleEffects3() {
    if (!charts.chart3) return

    const container = document.getElementById('chart3')
    const hasEffects = container.style.filter !== 'none'

    if (hasEffects) {
      container.style.filter = 'none'
      updateStatus('chart3', 'âœ… ç‰¹æ•ˆå·²å…³é—­')
    } else {
      container.style.filter = 'drop-shadow(0 0 20px rgba(255, 107, 107, 0.5))'
      updateStatus('chart3', 'âœ¨ ç‰¹æ•ˆå·²å¼€å¯')
    }
  }

  // å¼€å§‹è‡ªåŠ¨æ›´æ–°
  function startAutoUpdate() {
    if (autoUpdateInterval) return

    autoUpdateInterval = setInterval(() => {
      if (!charts.chart4) return

      const newData = [
        { value: Math.random() * 2 + 0.5, color: '#ff6b6b', label: 'å®æ—¶æ•°æ®A', height: 0.6, offset: 0 },
        { value: Math.random() * 1.5 + 0.3, color: '#45b7d1', label: 'å®æ—¶æ•°æ®B', height: 0.5, offset: 0 },
        { value: Math.random() * 1 + 0.2, color: '#ffd700', label: 'å®æ—¶æ•°æ®C', height: 0.4, offset: 0 },
      ]

      charts.chart4.setData(newData)
    }, 2000)

    updateStatus('chart4', 'ğŸ”„ è‡ªåŠ¨æ›´æ–°å·²å¯åŠ¨')
  }

  // åœæ­¢è‡ªåŠ¨æ›´æ–°
  function stopAutoUpdate() {
    if (autoUpdateInterval) {
      clearInterval(autoUpdateInterval)
      autoUpdateInterval = null
      updateStatus('chart4', 'â¹ï¸ è‡ªåŠ¨æ›´æ–°å·²åœæ­¢')
    }
  }

  // æ›´æ–°çŠ¶æ€
  function updateStatus(chartId, message) {
    const statusBar = document.querySelector(`#${chartId}`).closest('.chart-card').querySelector('.status-text')
    statusBar.textContent = `çŠ¶æ€ï¼š${message}`
  }

  // è°ƒæ•´ innerRadius çš„å‡½æ•°
  function adjustInnerRadius(chartId, newInnerRadius) {
    if (!charts[chartId]) {
      console.error(`å›¾è¡¨ ${chartId} æœªåˆå§‹åŒ–`);
      return;
    }
    
    try {
      // ä½¿ç”¨ setOption æ›´æ–°é…ç½®
      charts[chartId].setOption({
        layout: {
          innerRadius: newInnerRadius
        }
      });
      
      console.log(`${chartId} å†…å¾„å·²æ›´æ–°ä¸º: ${newInnerRadius}`);
      
      // æ›´æ–°çŠ¶æ€
      updateStatus(chartId, `âœ… å†…å¾„å·²è°ƒæ•´ä¸º ${newInnerRadius}`);
      
    } catch (error) {
      console.error(`æ›´æ–° ${chartId} å†…å¾„å¤±è´¥:`, error);
      updateStatus(chartId, `âŒ å†…å¾„è°ƒæ•´å¤±è´¥: ${error.message}`);
    }
  }

  // é‡ç½®ç›¸æœºåˆ°åˆå§‹ä½ç½®
  function resetCamera(chartId) {
    if (!charts[chartId]) {
      console.error(`å›¾è¡¨ ${chartId} æœªåˆå§‹åŒ–`);
      return;
    }
    
    try {
      if (charts[chartId].cameraControls) {
        charts[chartId].cameraControls.resetCamera();
        updateStatus(chartId, 'âœ… ç›¸æœºå·²é‡ç½®åˆ°åˆå§‹ä½ç½®');
      } else {
        updateStatus(chartId, 'âŒ è¯¥å›¾è¡¨ä¸æ”¯æŒç›¸æœºæ§åˆ¶');
      }
    } catch (error) {
      console.error(`é‡ç½®ç›¸æœºå¤±è´¥:`, error);
      updateStatus(chartId, `âŒ ç›¸æœºé‡ç½®å¤±è´¥: ${error.message}`);
    }
  }

  // åˆ‡æ¢è‡ªåŠ¨æ—‹è½¬
  function toggleAutoRotate(chartId) {
    if (!charts[chartId]) {
      console.error(`å›¾è¡¨ ${chartId} æœªåˆå§‹åŒ–`);
      return;
    }
    
    try {
      if (charts[chartId].cameraControls) {
        const currentState = charts[chartId].cameraControls.getCameraState();
        const newAutoRotate = !currentState.autoRotate;
        
        charts[chartId].cameraControls.setAutoRotate(newAutoRotate, 1.0);
        
        updateStatus(chartId, newAutoRotate ? 'âœ… è‡ªåŠ¨æ—‹è½¬å·²å¼€å¯' : 'â¹ï¸ è‡ªåŠ¨æ—‹è½¬å·²åœæ­¢');
      } else {
        updateStatus(chartId, 'âŒ è¯¥å›¾è¡¨ä¸æ”¯æŒç›¸æœºæ§åˆ¶');
      }
    } catch (error) {
      console.error(`åˆ‡æ¢è‡ªåŠ¨æ—‹è½¬å¤±è´¥:`, error);
      updateStatus(chartId, `âŒ åˆ‡æ¢è‡ªåŠ¨æ—‹è½¬å¤±è´¥: ${error.message}`);
    }
  }

  // é¡µé¢å¸è½½æ—¶æ¸…ç†
  window.addEventListener('beforeunload', function() {
    if (autoUpdateInterval) {
      clearInterval(autoUpdateInterval)
    }
  })
</script>
</body>
</html>
